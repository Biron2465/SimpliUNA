<p-dialog header="Agregar Curso" [(visible)]="agregarDialog" [style]="{width: '50vw'}" [draggable]="false"
    [modal]="true" [responsive]="true">

    <form autocomplete="off" [formGroup]="agregarCursoFormulario">

        <div class="formgrid grid">
            <div class="field col-12 md:col-6 sm:col-12">
                <label for="NRC">NRC</label>
                <input formControlName="NRC" id="NRC" type="number" placeholder="Ej: 40090"
                    class="text-base text-color surface-overlay border-solid surface-border border-round outline-none focus:border-primary w-full mt-2"
                    style="padding: 0.9rem;">
            </div>
            <div class="field col-12 md:col-6 sm:col-12">
                <label for="NOMBRECURSO">Nombre del Curso</label>
                <div class="card mt-2">
                    <p-dropdown inputId="NOMBRECURSO" appendTo="body" [autoDisplayFirst]="false"
                        [formControl]="nuevoNombre" placeholder="Seleccione el curso" [editable]="true"></p-dropdown>
                </div>
            </div>
            <div class="field col-12 md:col-6 sm:col-12">
                <label for="CODIGOCURSO">Código</label>
                <div class="card mt-2">
                    <p-dropdown inputId="CODIGOCURSO" appendTo="body" [autoDisplayFirst]="false"
                        [formControl]="nuevoCodigo" placeholder="Seleccione el código" [editable]="true"></p-dropdown>
                </div>
            </div>
            <div class="field col-12 md:col-6 sm:col-12" style="width: 50%;">
                <label for="NOMRBEPROFESOR">Profesor</label>
                <div class="card mt-2">
                    <p-dropdown inputId="NOMRBEPROFESOR" appendTo="body" [autoDisplayFirst]="false"
                        [options]="profesores" [formControl]="nuevoProfesor" [(ngModel)]="selectedProfesor"
                        placeholder="Seleccione el profesor" [editable]="true">
                        <ng-template let-profesor pTemplate="item">
                            {{ profesor.nombre }}
                        </ng-template>
                    </p-dropdown>
                </div>
            </div>
        </div>


        <hr>

        <div class="formgrid p-fluid grid mt-5">

            <div class="field col-12 md:col-4">
                <span class="p-float-label">
                    <p-dropdown inputId="DIAS" [autoDisplayFirst]="false" [formControl]="nuevoDia" [options]="dias"
                        [(ngModel)]="diaSeleccionado" appendTo="body"></p-dropdown>
                    <label for="DIAS">Dias</label>
                </span>
            </div>

            <div class="field col-12 md:col-4">
                <span class="p-float-label">
                    <p-calendar [formControl]="nuevoHora_Entrada" [(ngModel)]="horaEntrada" [timeOnly]="true"
                        [hourFormat]="'24'" inputId="HORAENTRADA"></p-calendar>
                    <label for="HORAENTRADA">Hora de entrada</label>
                </span>
            </div>

            <div class="field col-12 md:col-4">
                <span class="p-float-label">
                    <p-calendar [formControl]="nuevoHora_Salida" [(ngModel)]="horaSalida" [timeOnly]="true"
                        [hourFormat]="'24'" inputId="HORASALIDA"></p-calendar>
                    <label for="HORASALIDA">Hora de Salida</label>
                </span>
            </div>


            <div class="field col-12 ">
                <div class="mt-2 flex justify-content-center">
                    <button pButton pRipple (click)="agregarHorario()" type="button" icon="pi pi-plus"
                        class="p-button-outlined p-button-rounded my-3">
                    </button>
                </div>
            </div>
        </div>

        <div class="grid">
            <div class="col">

                <p-table [value]="diasArr.controls" styleClass="p-datatable-striped">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Dia(s)</th>
                            <th>Hora de Entrada</th>
                            <th>Hora de Salida</th>
                            <th style="width: 5rem"></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-i="rowIndex">
                        <tr>

                            <td>{{diasArr.controls[i].value }}</td>
                            <td>{{horaEntradaArr.controls[i].value | date: 'HH:mm'}}</td>
                            <td>{{horaSalidaArr.controls[i].value | date: 'HH:mm'}}</td>

                            <td>
                                <button type="button" pButton pRipple icon="pi pi-trash"
                                    class="p-button-danger p-button-outlined p-button-rounded"
                                    (click)="borrarHorario(i)"></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>

        <div class="mt-2 flex justify-content-end">
            <button pButton pRipple type="button" label="Guardar" icon="pi pi-check"
                class="p-button p-button-outlined p-button-rounded" (click)="guardarCurso()">
            </button>

        </div>

    </form>

</p-dialog>